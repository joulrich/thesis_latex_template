\documentclass[thesis.tex]{subfiles}

\begin{document}

\chapter{Design}\label{chap:design}
The chapter in which you explain all the stuff your supervisor hopefully already knows. But its always good to make sure we're all on the same page especially with so mange pages.

\section{Statusmaschine}
\section{Protokolldesign}
Damit alle Anforderungen an die Kommunikation zwischen BC und MC erfüllt werden können, wird ein eigenes Protokoll verwendet.
%%
Dieses wird in der einheitlichen und weit verbreiteten „JavaScript Object Notation“ (JSON) verfasst.
%%
Dieser Standard hat für die Anwendung folgende Vorteile.
%%
Das Protokoll kann einfach zwischen Client und Server übertragen werden, da JSON sehr einfach in einen String umgewandelt werden kann.
%%
\\

Es existieren bereits in sehr vielen Programmiersprachen Bibliotheken die JSON verstehen, bearbeiten und umwandeln können,
sodass Nachrichten schnell zwischen verschiedenen Anwendungen konvertiert werden können, wenn dies benötigt wird.
%%
Das Protokoll kann durch diese Form einfach und schnell erweitert oder angepasst werden.
%%
Durch seine einheitliche Struktur und Hierarchieebenen wird dieser Effekt verstärkt und die Nachrichten können dadurch gut strukturiert werden.
%%
Es ist menschenlesbar und kann somit ohne spezielles Programm von Menschen gelesen und verstanden werden.
%%
Dies hilft z.B. beim Debuggen oder um Protokolleinträge schneller lesen zu können.
%%
\\

Das entwickelte Protokoll enthält folgende Informationen: Zeitstempel, Referenznummer, Nachrichtentyp, Nachrichteninhalt, Antwortreferenznummer.
%%
Der Zeitstempel wird der Nachricht beim Erstellen gegeben damit der zeitliche Verlauf nachvollzogen werden kann und die
Nachrichten in einem Verlaufsprotokoll angelegt werden können.
%%
Die Referenznummer aufsteigend für jede Nachricht vergeben und macht diese eindeutig Identifizierbar.
%%
Diese Nummer wird auch als Referenznummer für eine Antwort auf eine bestimmte Nachricht genutzt.
%%
Diese wird dann unter Antwortreferenznummer der Nachricht mitgeben und findet nur bei Nachrichten des Typs „Antwort“ Anwendung.
%%
Der Nachrichtentyp gibt an welchen Typ die geschickte Mitteilung hat.
%%
Hier gibt es momentan die Typen Anfrage, Antwort, Herzschlag und initial Nachricht.
%%
Herzschlag wird immer dann vergeben, wenn ein Nachrichtenaustausch zwischen Client und Server stattfindet, der zur Verbindungsicherung dient.
%%
Die initiale Nachricht schickt der Client einmalig am Anfang einer Verbindung an dem Server,
um ihm Einstellungs- und Verbindungsparameter mitzuteilen.
%%
Im Nachrichteninhalt befindet sich alles, was die Mitteilung als Daten beinhaltet.
%%
Dies können beispielweise gerade genannte Parameter oder Anfrage bzw. Antwortdetails sein.
%%
Durch den Aufbau der JSON kann das Datenfeld bei Bedarf ebenfalls strukturiert werden, um auch größere Datenmengen gut abbilden zu können.
%%
\\

(TODO: Quellen für Vorteile bzw. zum Aufbau von JSON finden)

\section{Primitiven}
Im folgenden Kapitel werden alle Primitiven aufgeführt und beschrieben.
%%
Das sind alle Informationen, die der LW-Modus von der BC braucht, um die vollständige Funktion zu gewährleisten
und um alle Anfragen des MC zu beantworten.
%%
\\

Um die Grundfunktionalität des Geräts und damit der Funktion des LW-Modus sicher zu stellen, werden in erster Linie
die Vitalwerte des Geräts benötigt.
%%
Zudem alle weiteren Informationen die es über die BC gibt.
%%
Darunter zählen die eindeutige Identifikationsnummer, die aktuelle Versionsnummer der Firm- und Software,
ein aktueller Zeitstempel, der Batteriestatus, der vorhandene Speicherplatz für Bild- und Videodateien,
die Temperatur Innen und Außen \textcolor{red}{(nochmal nachfragen)}, die Mobilfunkstärke sowie Informationen über die Mobilfunkverbindung,
wenn das Gerät ins Netz eingewählt ist, WLAN-Stärke und Verbindungsdetails falls eine WLAN-Verbindung besteht und
der letzte bekannte Standort der BC.
%%
\\

Informationen, die sich schnell ändern können wie Verbindungsdetails und -stärken, der letzte Standort und
einen aktuellen Zeitstempel soll die BC alle 1-5 Sekunden bereitstellen können.
%%
Batteriestatus, Temperatur und Speicherplatz die zum Überwachen des Gerätezustands wichtig sind sollten alle 30 Sekunden aktualisiert werden.
%%
Einmalig zum Start der Software werden Versions- und Identifikationsnummern benötigt.
%%
Da diese Angaben sich während des Betriebs nicht ändern können.
%%
\\

Damit die BC dem LW während aktiven Lone-Workers-Modus einen Alarmfall mitteilen kann,
muss es die Möglichkeit geben die Lautsprecher, den Vibrationsmechanismus sowie die LEDs ansteuern zu können.
%%
Dies wird benötigt um akustische, haptische und visuelle Alarmmeldungen an den LW weiter zu reichen.
%%
Der Lautsprecher wird neben dem Abspielen von Alarmtönen noch für das Abspielen von Audionachrichten verwendet.
%%
Außerdem soll es möglich seine Informationen auf dem Display anzuzeigen.
%%
Dies findet Anwendung für Textnachrichten vom MC oder Alarmursachen.
%%
Bei letzterem kann der LW nach einem Alarm mehr Informationen über die Art der Warnung bekommen.
%%
Beispielsweise ob und welcher Gerätefehler vorliegt oder wie lange eine Mobilfunkverbindung schon getrennt ist.
%%
\\

Der LW-Modus muss die Möglichkeit haben den Video- und Audiostream der BC zu aktivieren.
%%
Auf Anfrage des MC soll die BC die beiden Streams über eine gesicherte Verbindung dem MC zur Verfügung stellen,
damit das Center den LW bei Bedarf Live überwachen kann.
%%
Außerdem soll dies nach selbem Schema auch für den Two-Way-Audio Kanal vollzogen werden.
%%
Dies dient dazu eine aktive Sprachverbindung zwischen MC und LW zu realisieren damit im Gefahrenfall schnell reagiert
und Informationen ausgetauscht werden können.
%%

\section{Höhere Funktionen}


\subfilebib % Makes bibliography available when compiling as subfile
\end{document}